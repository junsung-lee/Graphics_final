<!DOCTYPE html>
<html>
    <meta charset="utf-8">
    <style>
    
    </style>
    <body>
        <header>
            <h1>Animated Word Cloud</h1>
            <p>Animated Word Cloud based on random size and color</p>
                <nav>
                        <ul>
                            <li><a href="final_demo.html">Main Page</a></li>
                            <li><a href="info.html">Project Information</a></li>
                            <li><a href="demo2.html">Word Cloud</a></li>
                            <li><a href="index.html">Animated Word Cloud</a></li>
                        </ul>
                    </nav>
        </header>
    
        <div id="words"></div>
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <script src="libraries/d3.layout.cloud.js"></script>
        <script src="https://d3js.org/d3-color.v1.min.js"></script>
        <script>
        // Based on https://github.com/jasondavies/d3-cloud/blob/master/examples/simple.html
        // http://bl.ocks.org/joews/9697914
        // Encapsulate the word cloud functionality
        function wordCloud(selector) {
    
        var color = d3.scaleOrdinal(d3.schemeSpectral[5]);
            // Constructing the word cloud's SVG
            var svg = d3.select(selector).append("svg")
                .attr("width", 800)
                .attr("height", 800)
                .style("background-color", 'black')
                .append("g")
                .attr("transform", "translate(400,400)");
    
            // https://www.d3-graph-gallery.com/graph/wordcloud_basic.html
            // Drawing the word cloud
            function draw(words) {
                var cloud = svg.selectAll("g text")
                                .data(words, function(d) { return d.text; })
    
                //Entering words
                cloud.enter()
                    .append("text")
                    .style("font-family", "Impact")
                    .style("fill", function(d,i) { return color(i); })
                        .style("fill-opacity", 0)
                    .attr("text-anchor", "middle")
                    .attr('font-size', 1)
                    .text(function(d) { return d.text; });
    
                // Entering and existing words
                cloud
                    .transition()
                        .duration(1000)
                        .style("font-size", function(d) { return d.size + "px"; })
                                .style("fill", function(d,i) { return color(i); })
                        .attr("transform", function(d) {
                            return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
                        })
                        .style("fill-opacity", 1);
    
                // Exiting words
                cloud.exit()
                    .transition()
                        .duration(300)
                        .style('fill-opacity', 0)
                        .attr('font-size', 1)
                        .remove();
            }
    
            return {
                update: function(words) {
                    d3.layout.cloud().size([500, 500])
                        .words(words)
                        .padding(3)
                        .rotate(function() { return ~~(Math.random() * 2) * 90; })
                        .font("Impact")
                        .fontSize(function(d) { return d.size; })
                        .on("end", draw)
                        .start();
                }
            }
    
        }
        // the list of all words used for the analysis 
        var words = [
            "lol swag af asap chillin sis smh stfu ugh wat wtf xd #getalljobs #jobs #winning ass bitch bullshit damn fuck fucked fucking hell shit"
        ]
    
        function getWords(i) {
            return words[i]
                    .split(' ')
                    .map(function(d) {
                        return {text: d, size: 20 + Math.random() * 60};
                    })
        }
    
        function showNewWords(vis, i) {
            i = i || 0;
    
            vis.update(getWords(i ++ % words.length))
            setTimeout(function() { showNewWords(vis, i + 1)}, 5000)
        }
    
        // Creating a new instance of the word cloud visualisation.
        var myWordCloud = wordCloud('#words');
    
        // Start cycling
        showNewWords(myWordCloud);
    
    </script>
</html>
